{{>layouts/header}}

<div class="container mt-4">
    <!-- Tabs Navigation -->
    <ul class="nav nav-tabs" id="categoryTabs" role="tablist">
        {{#categories}}
            <li class="nav-item" role="presentation">
                <button
                        class="nav-link {{#isFirst}}active{{/isFirst}}"
                        id="tab-{{id}}"
                        data-bs-toggle="tab"
                        data-bs-target="#content-{{id}}"
                        type="button"
                        role="tab"
                        aria-controls="content-{{id}}"
                        aria-selected="{{#isFirst}}true{{/isFirst}}">
                    {{pname}}
                </button>
            </li>
        {{/categories}}
    </ul>

    <!-- Tabs Content -->
    <div class="tab-content" id="categoryContent">
        {{#categories}}
            <div
                    class="tab-pane fade {{#isFirst}}show active{{/isFirst}}"
                    id="content-{{id}}"
                    role="tabpanel"
                    aria-labelledby="tab-{{id}}">

                <div class="row mt-3">
                    <!-- Loop over the products for the current category -->
                    {{#products}}  <!-- Access the products directly inside each category -->
                        <div class="col-md-4 mb-4">
                            <!-- Product Card -->
                            <div class="card shadow-sm h-100">
                                <a href="/products/{{id}}" class="text-decoration-none">
                                    <img src="../images/{{pimg}}" alt="Product Image" class="card-img-top" style="height: 200px; object-fit: cover;">
                                </a>
                                <div class="card-body">
                                    <h5 class="card-title">{{pname}}</h5>
                                    <p class="card-text text-muted">{{pprice}} 원</p>
                                    <div class="d-flex justify-content-between">
                                        <a href="/products/{{id}}/delete" class="btn btn-primary btn-sm">삭제하기</a>
                                        <a href="/products/{{id}}/edit" class="btn btn-success btn-sm">수정하기</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {{/products}}
                </div>

            </div>
        {{/categories}}
    </div>

    <!-- Add Product Button -->
    <div class="text-end mt-3">
        <a href="/products/new" class="btn btn-success">상품 등록하기</a>
    </div>
</div>

{{>layouts/footer}}
